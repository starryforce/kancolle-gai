webpackJsonp([1],{"+Q6q":function(e,t){},"0JpJ":function(e,t){},"6j/I":function(e,t){},"7XYP":function(e,t){e.exports=[{type:"巡洋舰",subs:[{type:"一等驱逐舰第二代神风型",subs:[{name:"北上",url:"www.kancolle.com/xiao"},{name:"大井",url:"www.kancolle.com/xiao"},{name:"木曾",url:"www.kancolle.com/xiao"}]},{type:"一等巡洋舰川内型",subs:[{name:"川内",url:"www.kancolle.com/xiao"},{name:"那珂",url:"www.kancolle.com/xiao"},{name:"天龙",url:"www.kancolle.com/xiao"}]}]},{type:"驱逐舰",subs:[{type:"一等驱逐舰晓型",subs:[{name:"晓",url:"www.kancolle.com/xiao"},{name:"响",url:"www.kancolle.com/xiao"},{name:"雷",url:"www.kancolle.com/xiao"},{name:"电",url:"www.kancolle.com/xiao"}]}]},{type:"战列舰",subs:[{type:"金刚型",subs:[{name:"金刚",url:"www.kancolle.com/xiao"},{name:"比睿",url:"www.kancolle.com/xiao"},{name:"榛名",url:"www.kancolle.com/xiao"},{name:"雾岛",url:"www.kancolle.com/xiao"}]},{type:"大和型",subs:[{name:"金刚",url:"www.kancolle.com/xiao"},{name:"比睿",url:"www.kancolle.com/xiao"},{name:"榛名",url:"www.kancolle.com/xiao"},{name:"雾岛",url:"www.kancolle.com/xiao"}]},{type:"长门型",subs:[{name:"金刚",url:"www.kancolle.com/xiao"},{name:"比睿",url:"www.kancolle.com/xiao"},{name:"榛名",url:"www.kancolle.com/xiao"},{name:"雾岛",url:"www.kancolle.com/xiao"}]}]}]},AlXy:function(e,t){},AoSJ:function(e,t){},B3xS:function(e,t){},FGgU:function(e,t){},IUWj:function(e,t){},KCMA:function(e,t){},L1so:function(e,t){},LtsI:function(e,t){},NHnr:function(e,t,a){"use strict";function r(e){a("Puzi")}function n(e){a("+Q6q")}function s(e){a("6j/I"),a("IUWj"),a("Y+Xl")}function i(e){a("ne5r")}function o(e){a("B3xS")}function l(e){a("KCMA")}function c(e){a("FGgU")}function p(e){a("cRjP")}function u(e){a("AlXy")}function d(e){a("AoSJ")}function m(e){a("jwXb")}function v(e){a("LtsI"),a("L1so")}function h(e){a("0JpJ")}function f(e){a("WafE")}function _(e){a("csMQ")}function g(e){a("fddg")}function w(e){a("rrkj")}Object.defineProperty(t,"__esModule",{value:!0});var y=a("qRXP"),b=a("2sCs"),x=a.n(b),C=a("ynTT"),k=a.n(C),T=(a("QTsQ"),{name:"HomeHeader",data:function(){return{keyword:"",activeRouter:"/home"}}}),$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-header",{staticClass:"m-header"},[a("el-row",{staticClass:"content",attrs:{type:"flex",align:"middle"}},[a("el-col",{attrs:{span:3}},[a("router-link",{staticClass:"logo",attrs:{to:"/"}},[e._v("\n        舰娘魔改\n      ")])],1),e._v(" "),a("el-col",{attrs:{span:5,offset:1}},[a("el-input",{attrs:{placeholder:"开始翻小姐姐的衣橱",clearable:""},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{staticClass:"search_button",attrs:{type:"primary",icon:"el-icon-search"}},[e._v("成为绅士")])],1),e._v(" "),a("el-col",{attrs:{span:10,offset:2}},[a("el-menu",{staticClass:"nav",attrs:{mode:"horizontal","default-active":e.activeRouter,router:""}},[a("el-menu-item",{attrs:{index:"/home"}},[e._v("主页")]),e._v(" "),a("el-menu-item",{attrs:{index:"/console"}},[e._v("控制台")]),e._v(" "),a("el-menu-item",{attrs:{index:"/login"}},[e._v("登录")]),e._v(" "),a("el-menu-item",{attrs:{index:"/register"}},[e._v("注册")])],1)],1)],1)],1)},S=[],R={render:$,staticRenderFns:S},F=R,E=a("/Xao"),D=r,I=E(T,F,!1,D,"data-v-31434cb9",null),P=I.exports,X={name:"HomeFooter"},N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-footer",{staticClass:"m-footer"},[a("section",{staticClass:"content"},[e._v("\n    Copyright © gakki.tv\n    "),a("span",{staticClass:"creator"},[e._v("By: "),a("a",{attrs:{href:"https://github.com/starryforce",target:"_ablank"}},[e._v("starryforce")])])])])},U=[],A={render:N,staticRenderFns:U},z=A,B=a("/Xao"),L=n,j=B(X,z,!1,L,"data-v-1b861db7",null),M=j.exports,H={name:"App",components:{HomeHeader:P,HomeFooter:M}},q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{attrs:{id:"app",direction:"vertical"}},[a("HomeHeader"),e._v(" "),a("router-view",{staticClass:"g-main"}),e._v(" "),a("HomeFooter")],1)},J=[],Q={render:q,staticRenderFns:J},O=Q,Z=a("/Xao"),W=s,Y=Z(H,O,!1,W,null,null),G=Y.exports,K=a("zO6J"),V=a("7XYP"),ee=a.n(V),te={name:"NavMenuSub",props:{shipInfo:{type:Array}}},ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.shipInfo&&e.shipInfo[0].type?e._l(e.shipInfo,function(t){return a("el-submenu",{key:t.type,attrs:{index:t.type}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-setting"}),e._v(" "),a("span",[e._v(e._s(t.type))])]),e._v(" "),t.subs&&t.subs.length>0?a("NavMenuSub",{attrs:{"ship-info":t.subs}}):e._e()],2)}):e._e(),e._v(" "),e.shipInfo&&e.shipInfo[0].name?e._l(e.shipInfo,function(t){return a("el-menu-item",{key:t.name,attrs:{index:t.name}},[e._v("\n      "+e._s(t.name)+"\n    ")])}):e._e()],2)},re=[],ne={render:ae,staticRenderFns:re},se=ne,ie=a("/Xao"),oe=i,le=ie(te,se,!1,oe,"data-v-743747e7",null),ce=le.exports,pe={name:"NavMenu",components:{NavMenuSub:ce},data:function(){return{shipInfo:ee.a}}},ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-menu",{attrs:{"default-active":"1"}},[a("NavMenuSub",{attrs:{"ship-info":e.shipInfo}})],1)},de=[],me={render:ue,staticRenderFns:de},ve=me,he=a("/Xao"),fe=o,_e=he(pe,ve,!1,fe,"data-v-b5cf429c",null),ge=_e.exports,we=a("lC5x"),ye=a.n(we),be=a("J0Oq"),xe=a.n(be),Ce={name:"CardThumbnail",components:{},props:{id:{type:String},name:{type:String},preview:{type:String},download_times:{type:Number},rate:{type:Number}},data:function(){return{}},computed:{card_url:function(){return"/card_detail/"+this.id}}},ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"m-card_thumbnail"},[a("router-link",{attrs:{to:e.card_url}},[a("img",{attrs:{src:e.preview,alt:e.name}}),e._v(" "),a("p",[e._v(e._s(e.name))]),e._v(" "),a("p",[a("span",[e._v("下载:"+e._s(e.download_times))]),e._v(" "),a("span",[e._v("评分:"+e._s(e.rate))])])])],1)},Te=[],$e={render:ke,staticRenderFns:Te},Se=$e,Re=a("/Xao"),Fe=l,Ee=Re(Ce,Se,!1,Fe,"data-v-05374fb4",null),De=Ee.exports,Ie={methods:{getShipCards:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.type,r=void 0===a?"detail":a,n=t.values,s=void 0===n?[]:n,i=t.offset,o=void 0===i?0:i,l=t.limit,c=void 0===l?8:l,p=t.sortBy,u=void 0===p?"downloadTimes":p,d=t.order,m=void 0===d?"DESC":d;return xe()(ye.a.mark(function t(){var a;return ye.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/v1/ship_cards",{params:{type:r,values:s,offset:o,limit:c,sortBy:u,order:m}});case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}},t,e)}))()}}},Pe={name:"ShowZone",components:{CardThumbnail:De},mixins:[Ie],props:{sort:String},data:function(){return{shipCards:[]}},computed:{result_url:function(){return"/explore/"+this.sort}},mounted:function(){var e=this;return xe()(ye.a.mark(function t(){return ye.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.getShipCards({sortBy:e.sort}).then(function(t){e.shipCards=t});case 1:case"end":return t.stop()}},t,e)}))()},methods:{}},Xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"m-showZone"},[a("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:6}},[a("h1",[e._t("default",[e._v("板块标题")])],2)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("router-link",{attrs:{to:e.result_url}},[e._v("更多")])],1)],1),e._v(" "),a("main",[a("div",{staticClass:"m-cards clearfix"},e._l(e.shipCards,function(t){return a("CardThumbnail",e._b({key:t.id,staticClass:"item"},"CardThumbnail",t,!1))}))])],1)},Ne=[],Ue={render:Xe,staticRenderFns:Ne},Ae=Ue,ze=a("/Xao"),Be=c,Le=ze(Pe,Ae,!1,Be,"data-v-5a4e2f74",null),je=Le.exports,Me={name:"HomeMain",components:{NavMenu:ge,ShowZone:je},mixins:[Ie],data:function(){return{shipCards:[]}},mounted:function(){var e=this;this.getShipCards({sortBy:"uploadTime",limit:5}).then(function(t){e.shipCards=t})},methods:{}},He=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-aside",{attrs:{width:"250px"}},[a("NavMenu")],1),e._v(" "),a("el-main",{staticClass:"m-home"},[a("div",{staticClass:"top"},[a("el-carousel",{staticClass:"carousel",attrs:{interval:4e3,type:"card",height:"300px"}},e._l(e.shipCards,function(e){return a("el-carousel-item",{key:e.id},[a("router-link",{attrs:{to:"/card_detail/"+e.id}},[a("img",{attrs:{src:e.preview,alt:e.name}})])],1)})),e._v(" "),a("section",{staticClass:"panel"},[a("p",[e._v("头像占位符")]),e._v(" "),a("p",[e._v("描述占位符")]),e._v(" "),a("p",[e._v("个人信息占位符")]),e._v(" "),a("router-link",{attrs:{to:"/console/card"}},[a("button",[e._v("上传魔改")])])],1)],1),e._v(" "),a("ShowZone",{staticClass:"clearfix",attrs:{sort:"uploadTime"}},[e._v("最新")]),e._v(" "),a("ShowZone",{staticClass:"clearfix",attrs:{sort:"downloadTimes"}},[e._v("下载最多")])],1)],1)},qe=[],Je={render:He,staticRenderFns:qe},Qe=Je,Oe=a("/Xao"),Ze=p,We=Oe(Me,Qe,!1,Ze,"data-v-23c1fbb0",null),Ye=We.exports,Ge={name:"ConsoleMain"},Ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-aside",[a("el-menu",[a("el-menu-item",{attrs:{index:"1"}},[a("i",{staticClass:"el-icon-menu"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[a("router-link",{attrs:{to:"/console/ship_type"}},[e._v("舰船类型管理")])],1)]),e._v(" "),a("el-menu-item",{attrs:{index:"2"}},[a("i",{staticClass:"el-icon-menu"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[a("router-link",{attrs:{to:"/console/ship"}},[e._v("舰船管理")])],1)]),e._v(" "),a("el-menu-item",{attrs:{index:"3"}},[a("i",{staticClass:"el-icon-menu"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[a("router-link",{attrs:{to:"/console/card"}},[e._v("魔改管理")])],1)])],1)],1),e._v(" "),a("router-view")],1)},Ve=[],et={render:Ke,staticRenderFns:Ve},tt=et,at=a("/Xao"),rt=u,nt=at(Ge,tt,!1,rt,"data-v-495338ff",null),st=nt.exports,it=a("3cXf"),ot=a.n(it),lt={name:"ConsoleShipType",data:function(){return{shipType:{shipType:"",shipSubtype:""},shipTypeRules:{shipType:[{required:!0,message:"请输入舰船类型",trigger:"blur"}],shipSubtype:[{required:!0,message:"请输入舰船子类型",trigger:"blur"}]}}},mounted:function(){},methods:{createShipType:function(e){var t=this;this.$refs[e].validate(function(a){return!!a&&(t.$http.post("/v1/ship_types",t.shipType).then(function(e){t.result=ot()(e.data)}),t.$refs[e].resetFields(),!1)})}}},ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",[e._v("舰船类型管理")]),e._v(" "),a("el-main",[a("el-form",{ref:"shipType",attrs:{model:e.shipType,rules:e.shipTypeRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"类型",prop:"shipType"}},[a("el-input",{model:{value:e.shipType.shipType,callback:function(t){e.$set(e.shipType,"shipType","string"==typeof t?t.trim():t)},expression:"shipType.shipType"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"子类型",prop:"shipSubtype"}},[a("el-input",{model:{value:e.shipType.shipSubtype,callback:function(t){e.$set(e.shipType,"shipSubtype","string"==typeof t?t.trim():t)},expression:"shipType.shipSubtype"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.createShipType("shipType")}}},[e._v("立即创建")])],1)],1)],1)],1)},pt=[],ut={render:ct,staticRenderFns:pt},dt=ut,mt=a("/Xao"),vt=d,ht=mt(lt,dt,!1,vt,"data-v-54eae914",null),ft=ht.exports,_t=a("zsLt"),gt=a.n(_t),wt=a("IHPB"),yt=a.n(wt),bt={name:"ConsoleShip",components:{},data:function(){return{ship:{code:"",name:"",type:[]},shipRules:{code:[{required:!0,message:"请输入图鉴ID",trigger:"blur"}],name:[{required:!0,message:"请输入舰船名称",trigger:"blur"}]},shipTypeList:[]}},computed:{options:function(){var e=[],t=[];return this.shipTypeList.forEach(function(e){t.push(e.ship_type)}),[].concat(yt()(new gt.a(t))).forEach(function(t){e.push({value:t,label:t,children:[]})}),this.shipTypeList.forEach(function(t){for(var a=0;a<e.length;a+=1)t.ship_type===e[a].value&&e[a].children.push({value:t.id,label:t.ship_subtype})}),e}},mounted:function(){this.initTypeDatas()},methods:{submit:function(){var e=this;return xe()(ye.a.mark(function t(){return ye.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/v1/ships",{code:Number(e.ship.code),name:e.ship.name,ship_type_id:e.ship.type[1]});case 2:case"end":return t.stop()}},t,e)}))()},handleChange:function(e){return e},initTypeDatas:function(){var e=this;return xe()(ye.a.mark(function t(){var a;return ye.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/v1/ship_types");case 2:a=t.sent,e.shipTypeList=a.data;case 4:case"end":return t.stop()}},t,e)}))()}}},xt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",[e._v("舰船管理")]),e._v(" "),a("el-main",[a("el-form",{ref:"ship",attrs:{model:e.ship,rules:e.shipRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"图鉴ID",prop:"code"}},[a("el-input",{attrs:{placeholder:"请输入图鉴ID"},model:{value:e.ship.code,callback:function(t){e.$set(e.ship,"code",e._n(t))},expression:"ship.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"舰名",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入舰名"},model:{value:e.ship.name,callback:function(t){e.$set(e.ship,"name","string"==typeof t?t.trim():t)},expression:"ship.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型"}},[a("el-cascader",{attrs:{"expand-trigger":"hover",options:e.options},on:{change:e.handleChange},model:{value:e.ship.type,callback:function(t){e.$set(e.ship,"type",t)},expression:"ship.type"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("立即创建")])],1)],1)],1)],1)},Ct=[],kt={render:xt,staticRenderFns:Ct},Tt=kt,$t=a("/Xao"),St=m,Rt=$t(bt,Tt,!1,St,"data-v-2efc9743",null),Ft=Rt.exports,Et={name:"MainConsoleCard",components:{},data:function(){return{card:{preview:"",name:"",type:[],shipName:"",fileName:"",creator:"",sourceUrl:"",uploader:"",pixivId:""},shipTypeList:[],ships:[],imageUrl:""}},computed:{shipTypes:function(){var e=[],t=[];return this.shipTypeList.forEach(function(e){t.push(e.ship_type)}),[].concat(yt()(new gt.a(t))).forEach(function(t){e.push({value:t,label:t,children:[]})}),this.shipTypeList.forEach(function(t){for(var a=0;a<e.length;a+=1)t.ship_type===e[a].value&&e[a].children.push({value:t.id,label:t.ship_subtype})}),e},shipsOptions:function(){var e=[];return this.ships.forEach(function(t){e.push({value:t.id,label:t.name})}),e}},mounted:function(){this.initTypeDatas()},methods:{submit:function(){var e=this;return xe()(ye.a.mark(function t(){return ye.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/v1/ship_cards",{preview:e.card.preview,name:e.card.name,ship_id:e.card.shipName,file_name:e.card.fileName,creator:e.card.creator,source_url:e.card.sourceUrl,uploader:e.card.uploader,pixiv_id:e.card.pixivId});case 2:case"end":return t.stop()}},t,e)}))()},getShipsByType:function(e){var t=this;return xe()(ye.a.mark(function a(){var r;return ye.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$http.get("/v1/ships?type="+e);case 2:r=a.sent,t.ships=r.data;case 4:case"end":return a.stop()}},a,t)}))()},initTypeDatas:function(){var e=this;return xe()(ye.a.mark(function t(){var a;return ye.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/v1/ship_types");case 2:a=t.sent,e.shipTypeList=a.data;case 4:case"end":return t.stop()}},t,e)}))()},uploadPreviewSuccess:function(e,t){this.imageUrl=URL.createObjectURL(t.raw),this.card.preview=e.path},uploadFileSuccess:function(e){this.card.fileName=e.fileName},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a}}},Dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",[e._v("魔改管理")]),e._v(" "),a("el-main",[a("el-form",{ref:"card",attrs:{model:e.card,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{model:{value:e.card.name,callback:function(t){e.$set(e.card,"name",t)},expression:"card.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"预览图"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/v1/previews","show-file-list":!1,"on-success":e.uploadPreviewSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"类型"}},[a("el-cascader",{attrs:{"expand-trigger":"hover",options:e.shipTypes},on:{change:function(t){e.getShipsByType(e.card.type[1])}},model:{value:e.card.type,callback:function(t){e.$set(e.card,"type",t)},expression:"card.type"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"舰名"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.card.shipName,callback:function(t){e.$set(e.card,"shipName",t)},expression:"card.shipName"}},e._l(e.shipsOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"附件上传"}},[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"/v1/files","on-success":e.uploadFileSuccess,multiple:!1}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("\n            只能上传jpg/png文件，且不超过500kb\n          ")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"画师名"}},[a("el-input",{model:{value:e.card.creator,callback:function(t){e.$set(e.card,"creator",t)},expression:"card.creator"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上传者"}},[a("el-input",{model:{value:e.card.uploader,callback:function(t){e.$set(e.card,"uploader",t)},expression:"card.uploader"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"素材图源"}},[a("el-input",{model:{value:e.card.sourceUrl,callback:function(t){e.$set(e.card,"sourceUrl",t)},expression:"card.sourceUrl"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Pixiv ID"}},[a("el-input",{model:{value:e.card.pixivId,callback:function(t){e.$set(e.card,"pixivId",t)},expression:"card.pixivId"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("立即创建")])],1)],1)],1)],1)},It=[],Pt={render:Dt,staticRenderFns:It},Xt=Pt,Nt=a("/Xao"),Ut=v,At=Nt(Et,Xt,!1,Ut,"data-v-585dc2bc",null),zt=At.exports,Bt={name:"CardThumbnailExplore",components:{},props:{id:{type:String},name:{type:String},preview:{type:String}},data:function(){return{}},computed:{card_url:function(){return"/card_detail/"+this.id}}},Lt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-link",{staticClass:"m-card_thumbnail_explore",attrs:{to:e.card_url}},[a("div",{staticClass:"m-preview"},[a("img",{attrs:{src:e.preview,alt:e.name}})]),e._v(" "),a("div",{staticClass:"m-introduction"},[a("h1",[e._v(e._s(e.name))]),e._v(" "),a("p",{staticClass:"tags"},[e._v("圣诞 冬季 西方")]),e._v(" "),a("p",{staticClass:"download_times"},[e._v("下载 NA次")]),e._v(" "),a("p",{staticClass:"rate"},[e._v("评分 "),a("span",[e._v("NA")])])])])},jt=[],Mt={render:Lt,staticRenderFns:jt},Ht=Mt,qt=a("/Xao"),Jt=h,Qt=qt(Bt,Ht,!1,Jt,"data-v-74cdc624",null),Ot=Qt.exports,Zt={name:"ExploreCards",components:{CardThumbnailExplore:Ot},mixins:[Ie],props:{sort:String},data:function(){return{shipCards:[],pageSize:1,currentPage:1,cardTotal:0}},mounted:function(){var e=this;this.getTotal().then(function(t){e.cardTotal=t}),this.getShipCards({type:"detail",sortBy:"uploadTime",limit:this.pageSize,offset:this.pageSize*(this.currentPage-1),order:"DESC"}).then(function(t){e.shipCards=t})},methods:{getTotal:function(){var e=this;return xe()(ye.a.mark(function t(){var a;return ye.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/v1/ship_cards",{params:{type:"quantity"}});case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}},t,e)}))()},handleSizeChange:function(e){var t=this;this.pageSize=e,this.getShipCards({sortBy:"uploadTime",limit:e,offset:e*(this.currentPage-1)}).then(function(e){t.shipCards=e})},handleCurrentChange:function(e){var t=this;this.currentPage=e,this.getShipCards({sortBy:"uploadTime",limit:this.pageSize,offset:this.pageSize*(e-1)}).then(function(e){t.shipCards=e})}}},Wt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-aside"),e._v(" "),a("el-main",[a("el-container",[a("el-header"),e._v(" "),a("el-main",e._l(e.shipCards,function(t){return a("CardThumbnailExplore",e._b({key:t.key},"CardThumbnailExplore",t,!1))})),e._v(" "),a("el-footer",[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[1,2,3,4,5,10],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.cardTotal,background:!0},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1),e._v(" "),a("el-aside")],1)},Yt=[],Gt={render:Wt,staticRenderFns:Yt},Kt=Gt,Vt=a("/Xao"),ea=f,ta=Vt(Zt,Kt,!1,ea,"data-v-082f2aef",null),aa=ta.exports,ra={name:"CardDetail",components:{},props:{id:{type:String}},data:function(){return{cardDetails:{},avgRate:4.5,privateRate:5,downloadUrl:""}},computed:{},mounted:function(){this.getCardDetails()},methods:{getCardDetails:function(){var e=this;return xe()(ye.a.mark(function t(){var a;return ye.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/v1/ship_cards/"+e.id);case 2:a=t.sent,e.cardDetails=a.data,e.downloadUrl="/v1/files/"+e.cardDetails.file_name;case 5:case"end":return t.stop()}},t,e)}))()}}},na=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"m-card_detail"},[a("el-main",{staticClass:"main"},[a("section",{staticClass:"detail"},[a("h1",[e._v("\n        "+e._s(e.cardDetails.name)+"\n      ")]),e._v(" "),a("section",{staticClass:"avg_rate"},[a("p",[a("span",[a("strong",[e._v("评分 ")]),e._v(e._s(e.avgRate))])]),e._v(" "),a("el-rate",{attrs:{disabled:"",colors:["#99A9BF","#F7BA2A","#FF9900"]},model:{value:e.avgRate,callback:function(t){e.avgRate=t},expression:"avgRate"}})],1),e._v(" "),a("table",[a("tr",[a("td",[e._v("舰名")]),e._v(" "),a("td",[e._v(e._s(e.cardDetails.shipName))])]),e._v(" "),a("tr",[a("td",[e._v("舰种")]),e._v(" "),a("td",[e._v(e._s(e.cardDetails.shipType)+e._s(e.cardDetails.shipSubtype))])]),e._v(" "),a("tr",[a("td",[e._v("素材来源")]),e._v(" "),a("td",[e._v(e._s(e.cardDetails.source_url))])]),e._v(" "),a("tr",[a("td",[e._v("画师")]),e._v(" "),a("td",[e._v(e._s(e.cardDetails.creator))])]),e._v(" "),a("tr",[a("td",[e._v("Pixiv ID")]),e._v(" "),a("td",[e._v(e._s(e.cardDetails.pixiv_id))])]),e._v(" "),a("tr",[a("td",[e._v("上传者")]),e._v(" "),a("td",[e._v(e._s(e.cardDetails.uploader))])]),e._v(" "),a("tr",[a("td",[e._v("上传时间")]),e._v(" "),a("td",[e._v(e._s(e.cardDetails.created_at))])]),e._v(" "),a("tr",[a("td",[e._v("评价")]),e._v(" "),a("td",[a("el-rate",{attrs:{colors:["#99A9BF","#F7BA2A","#FF9900"]},model:{value:e.privateRate,callback:function(t){e.privateRate=t},expression:"privateRate"}})],1)])])]),e._v(" "),a("section",{staticClass:"preview"},[a("img",{attrs:{src:e.cardDetails.preview,alt:"cardDetails.name"}}),e._v(" "),a("p",[a("strong",[e._v("下载次数")]),e._v(" "+e._s(e.cardDetails.download_times))]),e._v(" "),a("p",[a("a",{attrs:{href:e.downloadUrl,target:"_blank"}},[a("button",{staticClass:"download"},[e._v("下载")])]),e._v(" "),a("button",{staticClass:"favorite"},[e._v("收藏")])])]),e._v(" "),a("section",{staticClass:"comment"})]),e._v(" "),a("el-aside",{staticClass:"aside"})],1)},sa=[],ia={render:na,staticRenderFns:sa},oa=ia,la=a("/Xao"),ca=_,pa=la(ra,oa,!1,ca,"data-v-07098309",null),ua=pa.exports,da={name:"UserLogin",data:function(){return{login:{name:"",password:""},loginRules:{name:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:5,max:16,message:"长度在 5 到 16 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"长度在 6 到 16 个字符",trigger:"blur"}]}}},methods:{processLogin:function(e){var t=this;this.$refs[e].validate(function(a){return!!a&&(t.$http.post("/v1/login",{name:t.login.name,password:t.login.password}).then(function(a){t.result=ot()(a.data),t.$refs[e].resetFields()}),!1)})},resetInfo:function(e){this.$refs[e].resetFields()}}},ma=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"m-login"},[a("h1",[e._v("登录")]),e._v(" "),a("el-form",{ref:"login",attrs:{model:e.login,rules:e.loginRules,"status-icon":"","label-width":"80px"}},[a("el-form-item",{attrs:{label:"昵称",prop:"name"}},[a("el-input",{model:{value:e.login.name,callback:function(t){e.$set(e.login,"name","string"==typeof t?t.trim():t)},expression:"login.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.login.password,callback:function(t){e.$set(e.login,"password","string"==typeof t?t.trim():t)},expression:"login.password"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.processLogin("login")}}},[e._v("登录")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetInfo("login")}}},[e._v("重置")])],1)],1)],1)},va=[],ha={render:ma,staticRenderFns:va},fa=ha,_a=a("/Xao"),ga=g,wa=_a(da,fa,!1,ga,null,null),ya=wa.exports,ba={name:"UserRegister",data:function(){var e=this;return{register:{name:"",password:"",checkPassword:""},registerRules:{name:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:5,max:16,message:"长度在 5 到 16 个字符",trigger:"blur"}],password:[{validator:function(t,a,r){""===a?r(new Error("请输入密码")):(""!==e.register.checkPassword&&e.$refs.register.validateField("checkPassword"),r())},trigger:"blur"},{min:6,max:16,message:"长度在 6 到 16 个字符",trigger:"blur"}],checkPassword:[{validator:function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.register.password?r(new Error("两次输入密码不一致!")):r()},trigger:"blur"},{min:6,max:16,message:"长度在 6 到 16 个字符",trigger:"blur"}]}}},methods:{processRegister:function(e){var t=this;this.$refs[e].validate(function(a){return!!a&&(t.$http.post("/v1/register",{name:t.register.name,password:t.register.password}).then(function(a){t.result=ot()(a.data),t.$refs[e].resetFields()}),!1)})},resetInfo:function(e){this.$refs[e].resetFields()}}},xa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"m-register"},[a("h1",[e._v("注册一个新的账号")]),e._v(" "),a("el-form",{ref:"register",attrs:{model:e.register,rules:e.registerRules,"status-icon":"","label-width":"80px"}},[a("el-form-item",{attrs:{label:"昵称",prop:"name"}},[a("el-input",{model:{value:e.register.name,callback:function(t){e.$set(e.register,"name","string"==typeof t?t.trim():t)},expression:"register.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.register.password,callback:function(t){e.$set(e.register,"password","string"==typeof t?t.trim():t)},expression:"register.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"重复密码",prop:"checkPassword"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.register.checkPassword,callback:function(t){e.$set(e.register,"checkPassword","string"==typeof t?t.trim():t)},expression:"register.checkPassword"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.processRegister("register")}}},[e._v("注册")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetInfo("register")}}},[e._v("重置")])],1)],1)],1)},Ca=[],ka={render:xa,staticRenderFns:Ca},Ta=ka,$a=a("/Xao"),Sa=w,Ra=$a(ba,Ta,!1,Sa,"data-v-67e90dca",null),Fa=Ra.exports;y.default.use(K.a);var Ea=new K.a({mode:"history",routes:[{path:"/",component:Ye},{path:"/home",name:"home",component:Ye},{path:"/login",name:"login",component:ya},{path:"/register",name:"register",component:Fa},{path:"/console",name:"console",component:st,children:[{path:"ship",name:"ship",component:Ft},{path:"ship_type",name:"shipType",component:ft},{path:"card",name:"card",component:zt}]},{path:"/explore/:sort",name:"explore",component:aa,props:!0},{path:"/category",name:"category",component:aa},{path:"/card_detail/:id",name:"cardDetail",component:ua,props:!0}]});y.default.prototype.$http=x.a,y.default.config.productionTip=!1,y.default.use(k.a),new y.default({el:"#app",router:Ea,template:"<App/>",components:{App:G}})},Puzi:function(e,t){},QTsQ:function(e,t){},WafE:function(e,t){},"Y+Xl":function(e,t){},cRjP:function(e,t){},csMQ:function(e,t){},fddg:function(e,t){},jwXb:function(e,t){},ne5r:function(e,t){},rrkj:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.b86321ae19c17044c29b.js.map